{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    "version": "2.0.0",
    "tasks": [
        {
            "label": "configure",
            "type": "shell",
            "command": "docker run --rm -it -v${workspaceFolder}:/build/qemu sh-tools/qemu_buildenv ../configure --disable-bsd-user --disable-guest-agent --disable-strip --disable-werror --disable-gcrypt --enable-debug-info --disable-debug-tcg --disable-docs --disable-tcg-interpreter --enable-attr --disable-brlapi --disable-linux-aio --disable-bzip2 --disable-bluez --disable-cap-ng --disable-curl --disable-fdt --disable-glusterfs --disable-gnutls --disable-nettle --disable-gtk --disable-rdma --disable-libiscsi --disable-vnc-jpeg --disable-kvm --disable-lzo --disable-curses --disable-libnfs --disable-numa --disable-opengl --disable-vnc-png --disable-rbd --disable-vnc-sasl --disable-sdl --disable-seccomp --disable-smartcard --disable-snappy --disable-spice --disable-libssh2 --disable-libusb --disable-usb-redir --disable-vde --disable-vhost-net --disable-virglrenderer --disable-virtfs --disable-vnc --disable-vte --disable-xen --disable-xen-pci-passthrough --disable-xfsctl --disable-linux-user --enable-system --disable-blobs --disable-tools --target-list=sh4eb-softmmu --static --disable-pie --enable-trace-backend=simple"
        },
        {
            "label": "make",
            "type": "shell",
            "command": "docker run --rm -it -v${workspaceFolder}:/build/qemu sh-tools/qemu_buildenv make -j8"
        },
        {
            "label": "debug",
            "type": "shell",
            "command": "docker run --rm -it -v${workspaceFolder}:/build/qemu sh-tools/qemu_buildenv gdb /build/qemu/build/sh4eb-softmmu/qemu-system-sh4eb"
        },
        {
            "label": "prelaunch gdb",
            "type": "shell",
            "command": "docker run --privileged -v${workspaceFolder}:/build/qemu --name debug_qemu -i -d --entrypoint=/bin/sh -p 1201:1201 -p 1202:1202 sh-tools/qemu_buildenv"
        },
        {
            "label": "postdebug gdb",
            "type": "shell",
            "command": "docker ps -a -f \"name=debug_qemu\" -q | % { docker kill $_ }; docker ps -a -f \"name=debug_qemu\" -q | % { docker rm $_ }"
        }
    ]
}